(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{204:function(e,t,a){"use strict";a.r(t);var n,c,r,i=a(0),s=a.n(i),l=a(68),o=a.n(l),d=(a(177),a(31)),j=a.n(d),b=a(62),u=a(22),h=a(46),p=a.n(h),O=a(102),x=a(14),m=a(216),v=a(227),f=a(222),g=a(217),y="https://guarded-forest-14729.herokuapp.com/api",k=a(91),C=a(15),D=function(e){return{type:"SET_PATIENT",payload:e}},H=a(2),S={patients:{},patient:null,diagnoses:[]},T=Object(i.createContext)([S,function(){return S}]),w=function(e){var t=e.reducer,a=e.children,n=Object(i.useReducer)(t,S),c=Object(u.a)(n,2),r=c[0],s=c[1];return Object(H.jsx)(T.Provider,{value:[r,s],children:a})},N=function(){return Object(i.useContext)(T)},E=a(215),L=a(221),R=a(220),Y=a(225),A=a(224),F=a(10),I=a(219),M=a(218),_=function(e){var t=e.name,a=e.label,n=e.options;return Object(H.jsxs)(I.a.Field,{children:[Object(H.jsx)("label",{children:a}),Object(H.jsx)(F.b,{as:"select",name:t,className:"ui dropdown",children:n.map((function(e){return Object(H.jsx)("option",{value:e.value,children:e.label||e.value},e.value)}))})]})},P=function(e){var t=e.field,a=e.label,n=e.placeholder;return Object(H.jsxs)(I.a.Field,{children:[Object(H.jsx)("label",{children:a}),Object(H.jsx)(F.b,Object(C.a)({placeholder:n},t)),Object(H.jsx)("div",{style:{color:"red"},children:Object(H.jsx)(F.a,{name:t.name})})]})},B=function(e){var t=e.field,a=e.label,n=e.min,c=e.max;return Object(H.jsxs)(I.a.Field,{children:[Object(H.jsx)("label",{children:a}),Object(H.jsx)(F.b,Object(C.a)(Object(C.a)({},t),{},{type:"number",min:n,max:c})),Object(H.jsx)("div",{style:{color:"red"},children:Object(H.jsx)(F.a,{name:t.name})})]})},V=function(e){var t=e.diagnoses,a=e.setFieldValue,n=e.setFieldTouched,c="diagnosisCodes",r=t.map((function(e){return{key:e.code,text:"".concat(e.name," (").concat(e.code,")"),value:e.code}}));return Object(H.jsxs)(I.a.Field,{children:[Object(H.jsx)("label",{children:"Diagnoses"}),Object(H.jsx)(M.a,{fluid:!0,multiple:!0,search:!0,selection:!0,options:r,onChange:function(e,t){n(c,!0),a(c,t.value)}}),Object(H.jsx)(F.a,{name:c})]})};!function(e){e.Male="male",e.Female="female",e.Other="other"}(n||(n={})),function(e){e.Hospital="Hospital",e.OccupationalHealthcare="OccupationalHealthcare",e.HealthCheck="HealthCheck"}(c||(c={})),function(e){e[e.Healthy=0]="Healthy",e[e.LowRisk=1]="LowRisk",e[e.HighRisk=2]="HighRisk",e[e.CriticalRisk=3]="CriticalRisk"}(r||(r={}));var G=[{value:n.Male,label:"Male"},{value:n.Female,label:"Female"},{value:n.Other,label:"Other"}],U=function(e){var t=e.onSubmit,a=e.onCancel;return Object(H.jsx)(F.d,{initialValues:{name:"",ssn:"",dateOfBirth:"",occupation:"",gender:n.Other},onSubmit:t,validate:function(e){var t="Field is required",a={};return e.name||(a.name=t),e.ssn||(a.ssn=t),e.dateOfBirth||(a.dateOfBirth=t),e.occupation||(a.occupation=t),a},children:function(e){var t=e.isValid,n=e.dirty;return Object(H.jsxs)(F.c,{className:"form ui",children:[Object(H.jsx)(F.b,{label:"Name",placeholder:"Name",name:"name",component:P}),Object(H.jsx)(F.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:P}),Object(H.jsx)(F.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:P}),Object(H.jsx)(F.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:P}),Object(H.jsx)(_,{label:"Gender",name:"gender",options:G}),Object(H.jsxs)(A.a,{children:[Object(H.jsx)(A.a.Column,{floated:"left",width:5,children:Object(H.jsx)(f.a,{type:"button",onClick:a,color:"red",children:"Cancel"})}),Object(H.jsx)(A.a.Column,{floated:"right",width:5,children:Object(H.jsx)(f.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t,children:"Add"})})]})]})}})},q=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.error;return Object(H.jsxs)(R.a,{open:t,onClose:a,centered:!1,closeIcon:!0,children:[Object(H.jsx)(R.a.Header,{children:"Add a new patient"}),Object(H.jsxs)(R.a.Content,{children:[c&&Object(H.jsx)(Y.a,{inverted:!0,color:"red",children:"Error: ".concat(c)}),Object(H.jsx)(U,{onSubmit:n,onCancel:a})]})]})},J=a(226),z=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],K=function(e){var t=e.rating,a=e.showText;return Object(H.jsxs)("div",{className:"health-bar",children:[Object(H.jsx)(J.a,{icon:"heart",disabled:!0,rating:4-t,maxRating:4}),a?Object(H.jsx)("p",{children:z[t]}):null]})},Q=function(e){var t=e.isLoading,a=N(),n=Object(u.a)(a,2),c=n[0].patients,r=n[1],i=s.a.useState(!1),l=Object(u.a)(i,2),o=l[0],d=l[1],h=s.a.useState(),x=Object(u.a)(h,2),v=x[0],g=x[1],k=function(){d(!1),g(void 0)},C=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,n,c,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("".concat(y,"/patients"),t);case 3:a=e.sent,n=a.data,r({type:"ADD_PATIENT",payload:n}),k(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error((null===(c=e.t0.response)||void 0===c?void 0:c.data)||"Unknown Error"),g((null===(i=e.t0.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.error)||"Unknown error");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(H.jsx)(E.a,{active:!0,inline:"centered"}):Object(H.jsxs)("div",{className:"App",children:[Object(H.jsx)(m.a,{textAlign:"center",children:Object(H.jsx)("h3",{children:"Patient list"})}),Object(H.jsxs)(L.a,{celled:!0,children:[Object(H.jsx)(L.a.Header,{children:Object(H.jsxs)(L.a.Row,{children:[Object(H.jsx)(L.a.HeaderCell,{children:"Name"}),Object(H.jsx)(L.a.HeaderCell,{children:"Gender"}),Object(H.jsx)(L.a.HeaderCell,{children:"Occupation"}),Object(H.jsx)(L.a.HeaderCell,{children:"Health Rating"})]})}),Object(H.jsx)(L.a.Body,{children:Object.values(c).map((function(e){return Object(H.jsxs)(L.a.Row,{children:[Object(H.jsx)(L.a.Cell,{children:Object(H.jsx)(O.b,{to:"/patients/".concat(e.id),children:e.name})}),Object(H.jsx)(L.a.Cell,{children:e.gender}),Object(H.jsx)(L.a.Cell,{children:e.occupation}),Object(H.jsx)(L.a.Cell,{children:Object(H.jsx)(K,{showText:!1,rating:1})})]},e.id)}))})]}),Object(H.jsx)(q,{modalOpen:o,onSubmit:C,error:v,onClose:k}),Object(H.jsx)(f.a,{onClick:function(){return d(!0)},children:"Add New Patient"})]})},W=a(95),X=function(e,t){return Object.values(t).filter((function(t){return t.code===e}))[0].name+" "},Z=function(e){var t=e.entry,a=e.diagnoses;return Object(H.jsxs)("div",{className:"ui segment",children:[Object(H.jsxs)("h2",{children:[t.date," ",Object(H.jsx)(W.a,{name:"hospital"})]}),Object(H.jsx)("em",{style:{color:"grey"},children:t.description}),t.diagnosisCodes&&t.diagnosisCodes.length>0&&Object(H.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(H.jsx)("strong",{children:"Diagnoses:"}),Object(H.jsx)("div",{className:"ui bulleted list",children:Object.keys(a).length>0&&t.diagnosisCodes.map((function(e){return Object(H.jsx)("div",{className:"item",children:X(e,a)},e)}))})]}),Object(H.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(H.jsxs)("div",{children:[Object(H.jsx)("strong",{children:"Discharge Date:"}),Object(H.jsxs)("span",{children:[" ",t.discharge.date]})]}),Object(H.jsxs)("div",{children:[Object(H.jsx)("strong",{children:"Discharge Criteria:"}),Object(H.jsxs)("span",{children:[" ",t.discharge.criteria]})]})]})]},t.id)},$=function(e){var t=e.entry;return Object(H.jsxs)("div",{className:"ui segment",children:[Object(H.jsxs)("h2",{children:[t.date," ",Object(H.jsx)(W.a,{name:"stethoscope"})]}),Object(H.jsx)("em",{style:{color:"grey"},children:t.description}),Object(H.jsx)("p",{style:{paddingTop:"5px"},children:Object(H.jsx)(W.a,{name:"heart",color:function(){switch(t.healthCheckRating){case r.Healthy:return"green";case r.LowRisk:return"yellow";case r.HighRisk:return"orange";default:return"red"}}()})})]},t.id)},ee=function(e){var t,a,n=e.entry,c=e.diagnoses;return Object(H.jsxs)("div",{className:"ui segment",children:[Object(H.jsxs)("h2",{children:[n.date," ",Object(H.jsx)(W.a,{name:"building"})]}),Object(H.jsx)("em",{style:{color:"grey"},children:n.description}),n.diagnosisCodes&&n.diagnosisCodes.length>0&&Object(H.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(H.jsx)("strong",{children:"Diagnoses:"}),Object(H.jsx)("div",{className:"ui bulleted list",children:Object.keys(c).length>0&&n.diagnosisCodes.map((function(e){return Object(H.jsx)("div",{className:"item",children:X(e,c)},e)}))})]}),(null===(t=n.sickLeave)||void 0===t?void 0:t.startDate)&&Object(H.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(H.jsx)("strong",{children:"Sick leave:"}),Object(H.jsxs)("span",{children:[" ",null===(a=n.sickLeave)||void 0===a?void 0:a.startDate," to ",n.sickLeave.endDate]})]})]},n.id)},te=function(e){var t=e.entry,a=N(),n=Object(u.a)(a,1)[0].diagnoses;switch(t.type){case"Hospital":return Object(H.jsx)(Z,{entry:t,diagnoses:n});case"OccupationalHealthcare":return Object(H.jsx)(ee,{entry:t,diagnoses:n});case"HealthCheck":return Object(H.jsx)($,{entry:t});default:return null}},ae=[{value:c.Hospital,label:"Hospital"},{value:c.HealthCheck,label:"Health Check"},{value:c.OccupationalHealthcare,label:"Occupational Healthcare"}],ne=function(e){return"string"===typeof e||e instanceof String},ce=function(e){var t=e.onSubmit,a=e.onCancel,n=N(),r=Object(u.a)(n,1)[0].diagnoses;return Object(H.jsx)(F.d,{initialValues:{description:"",date:"",specialist:"",diagnosisCodes:[],discharge:{date:"",criteria:""},sickLeave:{startDate:"",endDate:""},employerName:"",healthCheckRating:0,type:c.Hospital},onSubmit:t,validate:function(e){var t,a="Field is required",n="Formatted incorrectly",r={};return e.description||(r.description=a),e.date||(r.date=a),e.specialist||(r.specialist=a),"string"!==typeof e.description&&(r.description=n),"string"!==typeof e.date&&(r.date=n),"string"!==typeof e.specialist&&(r.specialist=n),e.type!==c.Hospital||e.discharge.date&&e.discharge.criteria||(r.discharge=a),e.type!==c.OccupationalHealthcare||ne(e.sickLeave.startDate)&&ne(e.sickLeave.endDate)||(r.sickLeave=n),e.type!==c.OccupationalHealthcare||ne(e.employerName)||(r.sickLeave=n),e.type===c.HealthCheck&&null===e.healthCheckRating&&(r.healthCheckRating=a),e.type===c.HealthCheck&&(t=e.healthCheckRating,"number"!==typeof Number(t))&&(r.healthCheckRating=n),r},children:function(e){var t=e.isValid,n=e.dirty,i=e.setFieldValue,s=e.setFieldTouched,l=e.values;return Object(H.jsxs)(F.c,{className:"form ui",children:[Object(H.jsx)(_,{label:"Entry Type",name:"type",options:ae}),Object(H.jsx)(F.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:P}),Object(H.jsx)(F.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:P}),Object(H.jsx)(F.b,{label:"Description",placeholder:"Description",name:"description",component:P}),Object(H.jsx)(V,{setFieldValue:i,setFieldTouched:s,diagnoses:Object.values(r)}),l.type===c.Hospital&&Object(H.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(H.jsx)(F.b,{label:"Discharge Date",placeholder:"YYYY-MM-DD",name:"discharge.date",component:P}),Object(H.jsx)(F.b,{label:"Discharge Criteria",placeholder:"Criteria",name:"discharge.criteria",component:P})]}),l.type===c.OccupationalHealthcare&&Object(H.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(H.jsx)(F.b,{label:"Sick Leave Start Date",placeholder:"YYYY-MM-DD",name:"sickLeave.startDate",component:P}),Object(H.jsx)(F.b,{label:"Sick Leave End Date",placeholder:"YYYY-MM-DD",name:"sickLeave.endDate",component:P}),Object(H.jsx)(F.b,{label:"Employer Name",placeholder:"Employer",name:"employerName",component:P})]}),l.type===c.HealthCheck&&Object(H.jsx)(F.b,{label:"Health Check Rating",name:"healthCheckRating",component:B,min:0,max:3}),Object(H.jsxs)(A.a,{children:[Object(H.jsx)(A.a.Column,{floated:"left",width:5,children:Object(H.jsx)(f.a,{type:"button",onClick:a,color:"red",children:"Cancel"})}),Object(H.jsx)(A.a.Column,{floated:"right",width:5,children:Object(H.jsx)(f.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t,children:"Add"})})]})]})}})},re=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.error;return Object(H.jsxs)(R.a,{open:t,onClose:a,centered:!1,closeIcon:!0,children:[Object(H.jsx)(R.a.Header,{children:"Add a new Entry"}),Object(H.jsxs)(R.a.Content,{children:[c&&Object(H.jsx)(Y.a,{inverted:!0,color:"red",children:"Error: ".concat(c)}),Object(H.jsx)(ce,{onSubmit:n,onCancel:a})]})]})},ie=function(){var e=N(),t=Object(u.a)(e,2),a=t[0].patient,n=t[1],c=s.a.useState(!1),r=Object(u.a)(c,2),i=r[0],l=r[1],o=function(){l(!1)},d=Object(x.f)().id;s.a.useEffect((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(y,"/patients/").concat(d));case 3:t=e.sent,a=t.data,n(D(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[n]);var h=function(){var e=Object(b.a)(j.a.mark((function e(t){var a,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("".concat(y,"/patients/").concat(d,"/entries"),t);case 3:a=e.sent,c=a.data,n(D(c)),o(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error((null===(r=e.t0.response)||void 0===r?void 0:r.data)||"Unknown Error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return a?Object(H.jsxs)("div",{className:"Patient-Details",children:[Object(H.jsxs)("h2",{children:[a.name," ",Object(H.jsx)(W.a,{name:function(){switch(null===a||void 0===a?void 0:a.gender){case"male":return"mars";case"female":return"venus";default:return"genderless"}}()})]}),Object(H.jsxs)("p",{children:["ssn: ",a.ssn]}),Object(H.jsxs)("p",{children:["occupation: ",null===a||void 0===a?void 0:a.occupation]}),Object(H.jsx)(f.a,{onClick:function(){return l(!0)},children:"Add New Entry"}),a.entries.length>0&&Object(H.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(H.jsx)("h3",{children:"entries"}),a.entries.map((function(e){return Object(H.jsx)(te,{entry:e},e.id)}))]}),Object(H.jsx)(re,{modalOpen:i,onSubmit:h,onClose:o})]}):null},se=function(){var e=N(),t=Object(u.a)(e,2)[1],a=s.a.useState(!1),n=Object(u.a)(a,2),c=n[0],r=n[1];return s.a.useEffect((function(){p.a.get("".concat(y,"/ping")),function(){var e=Object(b.a)(j.a.mark((function e(){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,e.next=4,p.a.get("".concat(y,"/patients"));case 4:a=e.sent,n=a.data,t({type:"SET_PATIENT_LIST",payload:n}),r(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}()()}),[t]),s.a.useEffect((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(y,"/diagnoses"));case 3:a=e.sent,n=a.data,t({type:"SET_DIAGNOSES_LIST",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(H.jsx)("div",{className:"App",children:Object(H.jsx)(O.a,{children:Object(H.jsxs)(m.a,{children:[Object(H.jsx)(v.a,{as:"h1",children:"Patientor"}),Object(H.jsx)(f.a,{as:O.b,to:"/",primary:!0,children:"Home"}),Object(H.jsx)(g.a,{hidden:!0}),Object(H.jsxs)(x.c,{children:[Object(H.jsx)(x.a,{path:"/patients/:id",children:Object(H.jsx)(ie,{})}),Object(H.jsx)(x.a,{path:"/",children:Object(H.jsx)(Q,{isLoading:c})})]})]})})})};o.a.render(Object(H.jsx)(w,{reducer:function(e,t){switch(t.type){case"SET_PATIENT_LIST":return Object(C.a)(Object(C.a)({},e),{},{patients:Object(C.a)(Object(C.a)({},t.payload.reduce((function(e,t){return Object(C.a)(Object(C.a)({},e),{},Object(k.a)({},t.id,t))}),{})),e.patients)});case"ADD_PATIENT":return Object(C.a)(Object(C.a)({},e),{},{patients:Object(C.a)(Object(C.a)({},e.patients),{},Object(k.a)({},t.payload.id,t.payload))});case"SET_PATIENT":return Object(C.a)(Object(C.a)({},e),{},{patient:t.payload});case"SET_DIAGNOSES_LIST":return Object(C.a)(Object(C.a)({},e),{},{diagnoses:Object(C.a)(Object(C.a)({},t.payload.reduce((function(e,t){return Object(C.a)(Object(C.a)({},e),{},Object(k.a)({},t.code,t))}),{})),e.diagnoses)});default:return e}},children:Object(H.jsx)(se,{})}),document.getElementById("root"))}},[[204,1,2]]]);
//# sourceMappingURL=main.1ad28ad6.chunk.js.map